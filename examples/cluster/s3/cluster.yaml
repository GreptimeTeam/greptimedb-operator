apiVersion: greptime.io/v1alpha1
kind: GreptimeDBCluster
metadata:
  name: cluster-with-s3
spec:
  initializer:
    image: greptime-registry.cn-hangzhou.cr.aliyuncs.com/greptime/greptimedb-initializer:latest
  base:
    main:
      image: greptime-registry.cn-hangzhou.cr.aliyuncs.com/greptime/greptimedb:latest
  frontend:
    replicas: 1
  meta:
    replicas: 1
    etcdEndpoints:
      - "etcd.etcd-cluster.svc.cluster.local:2379"
  datanode:
    replicas: 1
  objectStorage:
    s3:
      bucket: "ap-southeast-1-test-bucket"
      region: "ap-southeast-1"
      secretName: "s3-credentials"
      root: "cluster-with-s3-dataaaaa"
    cache:
      cacheCapacity: "5GiB"
