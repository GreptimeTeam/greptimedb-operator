apiVersion: greptime.io/v1alpha1
kind: GreptimeDBCluster
metadata:
  name: test00
  namespace: default
spec:
  version: latest
  initializer:
    image: greptime/greptimedb-initializer:latest
  httpPort: 5000
  rpcPort: 4001
  mysqlPort: 4002
  postgreSQLPort: 4003
  enableMultiplePVCs: false
  storage:
    file:
      mountPath: /data/greptimedb/data
      storageRetainPolicy: Retain
      storageSize: 20Gi
  wal:
    raftEngine:
      file:
        mountPath: /data/greptimedb/wal
        storageRetainPolicy: Retain
        storageSize: 5Gi
  base:
    main:
      image: greptime/greptimedb:latest
      livenessProbe:
        httpGet:
          path: /health
          port: 4000
  frontend:
    replicas: 3
    service:
      type: ClusterIP
    logging:
      level: info
      logsDir: /data/greptimedb/logs
      onlyLogToStdout: false
      persistentWithData: false
      logFormat: text
    template:
      main:
        image: greptime/greptimedb:latest
        livenessProbe:
          httpGet:
            path: /health
            port: 5000
  meta:
    enableRegionFailover: false
    httpPort: 4000
    rpcPort: 3002
    replicas: 3
    logging:
      level: info
      logsDir: /data/greptimedb/logs
      onlyLogToStdout: false
      persistentWithData: false
      logFormat: text
    template:
      main:
        image: greptime/greptimedb:latest
        livenessProbe:
          httpGet:
            path: /health
            port: 4000
  datanode:
    httpPort: 4000
    rpcPort: 4001
    replicas: 1
    logging:
      level: info
      logsDir: /data/greptimedb/logs
      onlyLogToStdout: false
      persistentWithData: false
      logFormat: text
    template:
      main:
        image: greptime/greptimedb:latest
        livenessProbe:
          httpGet:
            path: /health
            port: 4000
